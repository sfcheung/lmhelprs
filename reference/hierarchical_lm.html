<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><title>Hierarchical Regression Analysis — hierarchical_lm • lmhelprs</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/Cabin-0.4.9/font.css" rel="stylesheet"><link href="../deps/Cousine-0.4.9/font.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet"><link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet"><script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Hierarchical Regression Analysis — hierarchical_lm"><meta name="description" content="Do hierarchical
regression analysis on two or more
models fitted by 'lm()'."><meta property="og:description" content="Do hierarchical
regression analysis on two or more
models fitted by 'lm()'."><meta property="og:image" content="https://sfcheung.github.io/lmhelprs/logo.png"><meta name="google-site-verification" content="0VLBmFnW_UJFI-7gXnORPBsWxqZwmzuGpK-TeVRLBjQ"></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-primary" data-bs-theme="dark" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">lmhelprs</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.3.0.4</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="nav-item"><a class="nav-link" href="../articles/lmhelprs.html">Get started</a></li>
<li class="active nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="nav-item"><a class="nav-link" href="../news/index.html">Changelog</a></li>
      </ul><ul class="navbar-nav"><li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json"></form></li>
<li class="nav-item"><a class="external-link nav-link" href="https://github.com/sfcheung/lmhelprs/" aria-label="GitHub"><span class="fa fab fa-github fa-lg"></span></a></li>
      </ul></div>


  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="../logo.png" class="logo" alt=""><h1>Hierarchical Regression Analysis</h1>
      <small class="dont-index">Source: <a href="https://github.com/sfcheung/lmhelprs/blob/main/R/hierarchical_lm.R" class="external-link"><code>R/hierarchical_lm.R</code></a></small>
      <div class="d-none name"><code>hierarchical_lm.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>Do hierarchical
regression analysis on two or more
models fitted by 'lm()'.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">hierarchical_lm</span><span class="op">(</span><span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>


<dl><dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>The outputs of <code><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm()</a></code>,
that is, one or more <code>lm</code>-class
objects. The outputs of other model
fitting functions may also be used,
but should be used with cautions.
Please refer to the "How it works"
section in "Details."</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    <p>If the models can be ordered in a
hierarchical way, the output is an
ANOVA table with the R-squared
estimate of each model, and the
R-squared change of each model
compared to the simpler model
preceding this model in the order.
The class of the output is
<code>hierarchical_lm</code>, with a print
method. If the models cannot be
ordered this way, <code>NA</code> is returned.</p><div class="section">
<h3 id="how-it-works">How it works<a class="anchor" aria-label="anchor" href="#how-it-works"></a></h3>


<p>It call <code><a href="hierarchical.html">hierarchical()</a></code> firsts to
order the outputs for <code><a href="https://rdrr.io/r/stats/lm.html" class="external-link">stats::lm()</a></code>,
If they can be ordered in a
hierarchical way, they will be passed
to <code><a href="https://rdrr.io/r/stats/anova.html" class="external-link">stats::anova()</a></code>. R-squared and
R-squared change will be computed
if they are available in the
<code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code> method applied to each
model.</p>
<p>Therefore, in principle, this
function can also be used for the
outputs of other model fitting
functions if their outputs have
<code><a href="https://rdrr.io/r/stats/anova.html" class="external-link">stats::anova()</a></code> and <code><a href="https://rdrr.io/r/base/summary.html" class="external-link">summary()</a></code>
methods.</p>
</div>

<div class="section">
<h3 id="check-datasets-used">Check Datasets Used<a class="anchor" aria-label="anchor" href="#check-datasets-used"></a></h3>


<p>The comparison is meaningful only
if all models are fitted to the
same datasets. There is not way
to guarantee this is the case, given
only the output of <code><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm()</a></code>. However,
there are necessary conditions to
claim that the same datasets are used:
the number of cases are the same,
the means, variances, and covariances
of numerical variables, and the
frequency distributions of variables
common to two models are identical.
If at least one of these conditions
is not met, then two models must have
been fitted to two different datasets.</p>
<p>The function will check these
conditions and raise an error if
any of these necessary conditions
are not met.</p>
</div>

    </div>
    <div class="section level2">
    <h2 id="details">Details<a class="anchor" aria-label="anchor" href="#details"></a></h2>
    <p>It conducted hierarchical
regression analysis on two or more
models fitted by <code><a href="https://rdrr.io/r/stats/lm.html" class="external-link">stats::lm()</a></code>.
The models must be able to be ordered
from the simplest to the most complex,
with each more complex model formed
by adding one or more terms to the
simpler model.</p>
<p>ANOVA will be conducted to compare
each model with the next more
complex model in the order, with
R-squared change computed.</p>
    </div>
    <div class="section level2">
    <h2 id="see-also">See also<a class="anchor" aria-label="anchor" href="#see-also"></a></h2>
    <div class="dont-index"><p><code><a href="https://rdrr.io/r/stats/lm.html" class="external-link">stats::lm()</a></code>, <code><a href="hierarchical.html">hierarchical()</a></code></p></div>
    </div>
    <div class="section level2">
    <h2 id="author">Author<a class="anchor" aria-label="anchor" href="#author"></a></h2>
    <p>Shu Fai Cheung <a href="https://orcid.org/0000-0002-9871-9448" class="external-link">https://orcid.org/0000-0002-9871-9448</a></p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span></span></span>
<span class="r-in"><span><span class="va">dat</span> <span class="op">&lt;-</span> <span class="va">data_test1</span></span></span>
<span class="r-in"><span><span class="va">lm1</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">x1</span> <span class="op">+</span> <span class="va">x2</span>, <span class="va">dat</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">lm2</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">x1</span> <span class="op">+</span> <span class="va">x2</span> <span class="op">+</span> <span class="va">x3</span> <span class="op">+</span> <span class="va">x4</span>, <span class="va">dat</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">lm3</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">x1</span> <span class="op">+</span> <span class="va">cat1</span> <span class="op">+</span> <span class="va">cat2</span> <span class="op">+</span> <span class="va">x2</span> <span class="op">+</span> <span class="va">x3</span> <span class="op">+</span> <span class="va">x4</span>, <span class="va">dat</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">lm4</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/stats/lm.html" class="external-link">lm</a></span><span class="op">(</span><span class="va">y</span> <span class="op">~</span> <span class="va">x1</span> <span class="op">+</span> <span class="va">x2</span><span class="op">*</span><span class="va">x3</span> <span class="op">+</span> <span class="va">x4</span>, <span class="va">dat</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="fu">hierarchical_lm</span><span class="op">(</span><span class="va">lm1</span>, <span class="va">lm3</span>, <span class="va">lm2</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Analysis of Variance Table</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Model 1: y ~ x1 + x2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Model 2: y ~ x1 + x2 + x3 + x4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Model 3: y ~ x1 + cat1 + cat2 + x2 + x3 + x4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   adj.R.sq   R.sq R.sq.change Res.Df   RSS Df Sum of Sq      F Pr(&gt;F)    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   0.5090 0.5189     0.00000     97 55.83                               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   0.7269 0.7380     0.21906     95 30.41  2    25.419 39.717 &lt;0.001 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   0.7270 0.7518     0.01385     90 28.80  5     1.607  1.004   0.42    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</span>
<span class="r-in"><span><span class="fu">hierarchical_lm</span><span class="op">(</span><span class="va">lm1</span>, <span class="va">lm2</span>, <span class="va">lm4</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Analysis of Variance Table</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Model 1: y ~ x1 + x2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Model 2: y ~ x1 + x2 + x3 + x4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Model 3: y ~ x1 + x2 * x3 + x4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   adj.R.sq   R.sq R.sq.change Res.Df   RSS Df Sum of Sq      F Pr(&gt;F)    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 1   0.5090 0.5189      0.0000     97 55.83                               </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 2   0.7269 0.7380      0.2191     95 30.41  2    25.419 39.320 &lt;0.001 ***</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> 3   0.7242 0.7382      0.0002     94 30.38  1     0.024  0.073  0.787    </span>
<span class="r-out co"><span class="r-pr">#&gt;</span> ---</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Signif. codes:  0 ‘***’ 0.001 ‘**’ 0.01 ‘*’ 0.05 ‘.’ 0.1 ‘ ’ 1</span>
<span class="r-in"><span><span class="co"># The following models will yield an error message:</span></span></span>
<span class="r-in"><span><span class="kw"><a href="https://rdrr.io/r/base/conditions.html" class="external-link">tryCatch</a></span><span class="op">(</span><span class="fu">hierarchical_lm</span><span class="op">(</span><span class="va">lm1</span>, <span class="va">lm3</span>, <span class="va">lm2</span>, <span class="va">lm4</span><span class="op">)</span>, error <span class="op">=</span> <span class="kw">function</span><span class="op">(</span><span class="va">e</span><span class="op">)</span> <span class="va">e</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> &lt;simpleError in hierarchical_lm(lm1, lm3, lm2, lm4): The models do not have hierarchical relations.&gt;</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p>Developed by Shu Fai Cheung.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer></div>





  </body></html>

